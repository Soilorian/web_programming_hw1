<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>stock profit calculator</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="flex items-center justify-center h-screen bg-gray-100">
    <div class="bg-white p-6 rounded-lg shadow-lg w-80">
        <label for="numberInput" class="block text-gray-700 font-semibold">Enter a number:</label>
        <input type="number" id="sellValue" class="mt-2 w-full p-2 border rounded" placeholder="Type a number...">
        <input type="number" id="buyValue" class="mt-2 w-full p-2 border rounded" placeholder="Type a number...">
        <input type="number" id="stockCount" class="mt-2 w-full p-2 border rounded" placeholder="Type a number...">
        
        <label class="block text-gray-700 font-semibold mt-4">Result:</label>
        <input 
        type="number" 
        id="resultOutput"
        class="mt-2 w-full p-2 border rounded bg-gray-200 text-gray-700 transition-all duration-300"
        readonly
        >
        <script>
            const sellInput = document.getElementById("sellValue")
            const buyInput = document.getElementById("buyValue")
            const stockInput = document.getElementById("stockCount")
            const outputElement = document.getElementById("resultOutput")
            prevOutput = parseFloat(outputElement.value)

            function updateResult() {
                setTimeout(
                    () => {
                        let result = parseFloat(outputElement.value)
                console.log("from html ", result)
                if (result > 0) {
                    const green = Math.max(60, Math.min(result * 0.6, 255))
                    outputElement.style.backgroundColor = `rgb(0, ${green}, 0)`
                } else if (result < 0) {
                    const red = Math.max(60, Math.min(Math.abs(result) * 0.6, 255))
                    outputElement.style.backgroundColor = `rgb(${red}, 0, 0)`
                } else {
                    outputElement.style.backgroundColor = "rgb(200, 200, 200)"
                }
                    }
                , 100)
            }

            sellInput.addEventListener("input", updateResult)
            buyInput.addEventListener("input", updateResult)
            stockInput.addEventListener("input", updateResult)
        </script>
        <formula evaluator="(sellValue-buyValue)*stockCount"/>
    </div>

    <script src="calculator.js"></script>
</body>
</html>
